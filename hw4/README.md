# Общее описание
## Задание
Разработать ассемблер и интерпретатор для учебной виртуальной машины
(УВМ). Система команд УВМ представлена далее.

Для ассемблера необходимо разработать читаемое представление команд
УВМ. Ассемблер принимает на вход файл с текстом исходной программы, путь к
которой задается из командной строки. Результатом работы ассемблера является
бинарный файл в виде последовательности байт, путь к которому задается из
командной строки. Дополнительный ключ командной строки задает путь к файлу-логу, в котором хранятся ассемблированные инструкции в духе списков
“ключ=значение”.

Интерпретатор принимает на вход бинарный файл, выполняет команды УВМ
и сохраняет в файле-результате значения из диапазона памяти УВМ. Диапазон
также указывается из командной строки.

Форматом для файла-лога и файла-результата является json.

Необходимо реализовать приведенные тесты для всех команд, а также
написать и отладить тестовую программу
# Команды ассемблера

Аккумулятор — регистр процессора, в котором сохраняются результаты выполнения арифметических и логических команд.

## Загрузка константы
| A | B |
| :---: | :---: | 
| Биты 0-3 | Биты 4-24 |
| 9 | Константа |

Размер команды: 4 байт.

Операнд: поле B.

Результат: регистр-аккумулятор.

## Чтение значения из памяти
|    A     |     B     |
|:--------:|:---------:| 
| Биты 0-3 | Биты 4-11 | 
|    5     | Смещение  | 

Размер команды: 4 байт.

Операнд: значение в памяти по адресу, которым является сумма адреса (регистр-аккумулятор) и смещения (поле B).

Результат: регистр-аккумулятор.

## Запись значения в память
|    A     |     B     |
|:--------:|:---------:| 
| Биты 0-3 | Биты 4-26 |
|    4     |   Адрес   |

Размер команды: 4 байт.

Операнд:  регистр-аккумулятор.

Результат: Результат: значение в памяти по адресу, которым является поле B.

## Бинарная операция: побитовый циклический сдвиг влево
|    A     |     B     |
|:--------:|:---------:|
| Биты 0-3 | Биты 4-26 |
|    11    |   Адрес   |

Размер команды: 4 байт.

Первый операнд: регистр-аккумулятор. 
Второй операнд: значение в памяти по адресу, которым является поле B. 
Результат: регистр-аккумулятор.

# Сборка и запуск проекта
1. Загрузить репозиторий на компьютер
```
git clone https://github.com/senya1101/config
```
2. Прейдите в директорию репозитория
```
cd hw4
```
3. Запустить assembler.py с указанием исполняемой программы, бинарного файла вывода и лог-файла
```
py src/assembler.py <исполняемая_программа.asm> <бинарный_файл_вывода.bin> -l <лог-файл.json>
```
4. Запустить interpreter.py с указанием бинарного файла данных, файла с результатами и диапазона памяти
```
py src/interpreter.py <бинарный_файл_данных.bin> <результат.json> -lb <левая_граница_диапазона> -rb <правая граница диапазона>
```
# Примерs работы программы
### Задание для тестовой программы
Выполнить поэлементно операцию побитовый циклический сдвиг влево над двумя векторами длины 8. Результат записать в первый вектор.
### Тестовая программа
```
LOAD_CONST 9 20
WRITE 4 0
LOAD_CONST 9 3
ROTATE_LEFT 11 0
WRITE 4 0

LOAD_CONST 9 20
WRITE 4 1
LOAD_CONST 9 2
ROTATE_LEFT 11 1
WRITE 4 1

LOAD_CONST 9 2
WRITE 4 2
LOAD_CONST 9 2
ROTATE_LEFT 11 2
WRITE 4 2

LOAD_CONST 9 3
WRITE 4 3
LOAD_CONST 9 3
ROTATE_LEFT 11 3
WRITE 4 3

LOAD_CONST 9 4
WRITE 4 4
LOAD_CONST 9 4
ROTATE_LEFT 11 4
WRITE 4 4

LOAD_CONST 9 5
WRITE 4 5
LOAD_CONST 9 5
ROTATE_LEFT 11 5
WRITE 4 5

LOAD_CONST 9 6
WRITE 4 6
LOAD_CONST 9 6
ROTATE_LEFT 11 6
WRITE 4 6

LOAD_CONST 9 7
WRITE 4 7
LOAD_CONST 9 7
ROTATE_LEFT 11 7
WRITE 4 7
```
### Данные, записанные в лог-файл
```
[
    {
        "command": "LOAD_CONST 9 20",
        "binary": "b'I\\x01\\x00\\x00'"
    },
    {
        "command": "WRITE 4 0",
        "binary": "b'\\x04\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 3",
        "binary": "b'9\\x00\\x00\\x00'"
    },
    {
        "command": "ROTATE_LEFT 11 0",
        "binary": "b'\\x0b\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 0",
        "binary": "b'\\x04\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 20",
        "binary": "b'I\\x01\\x00\\x00'"
    },
    {
        "command": "WRITE 4 1",
        "binary": "b'\\x14\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 2",
        "binary": "b')\\x00\\x00\\x00'"
    },
    {
        "command": "ROTATE_LEFT 11 1",
        "binary": "b'\\x1b\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 1",
        "binary": "b'\\x14\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 2",
        "binary": "b')\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 2",
        "binary": "b'$\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 2",
        "binary": "b')\\x00\\x00\\x00'"
    },
    {
        "command": "ROTATE_LEFT 11 2",
        "binary": "b'+\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 2",
        "binary": "b'$\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 3",
        "binary": "b'9\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 3",
        "binary": "b'4\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 3",
        "binary": "b'9\\x00\\x00\\x00'"
    },
    {
        "command": "ROTATE_LEFT 11 3",
        "binary": "b';\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 3",
        "binary": "b'4\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 4",
        "binary": "b'I\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 4",
        "binary": "b'D\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 4",
        "binary": "b'I\\x00\\x00\\x00'"
    },
    {
        "command": "ROTATE_LEFT 11 4",
        "binary": "b'K\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 4",
        "binary": "b'D\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 5",
        "binary": "b'Y\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 5",
        "binary": "b'T\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 5",
        "binary": "b'Y\\x00\\x00\\x00'"
    },
    {
        "command": "ROTATE_LEFT 11 5",
        "binary": "b'[\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 5",
        "binary": "b'T\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 6",
        "binary": "b'i\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 6",
        "binary": "b'd\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 6",
        "binary": "b'i\\x00\\x00\\x00'"
    },
    {
        "command": "ROTATE_LEFT 11 6",
        "binary": "b'k\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 6",
        "binary": "b'd\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 7",
        "binary": "b'y\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 7",
        "binary": "b't\\x00\\x00\\x00'"
    },
    {
        "command": "LOAD_CONST 9 7",
        "binary": "b'y\\x00\\x00\\x00'"
    },
    {
        "command": "ROTATE_LEFT 11 7",
        "binary": "b'{\\x00\\x00\\x00'"
    },
    {
        "command": "WRITE 4 7",
        "binary": "b't\\x00\\x00\\x00'"
    }
]
```
### Данные, записанные в файл-результат
```
{
    "memory_range": [
        1048577,
        1,
        8,
        24,
        64,
        160,
        384,
        896
    ],
    "accumulator": 896
}
```

## Результаты тестирования
![image](https://github.com/user-attachments/assets/12f47803-d419-4a91-bfa9-e5fdb387e9c1)